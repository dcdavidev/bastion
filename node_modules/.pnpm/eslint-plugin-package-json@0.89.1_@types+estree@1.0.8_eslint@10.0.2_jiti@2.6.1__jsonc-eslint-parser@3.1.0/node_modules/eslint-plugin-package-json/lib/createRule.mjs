import { isPackageJson } from "./utils/isPackageJson.mjs";

//#region src/createRule.ts
/**
* Rule options type is inferred from the JSON schema by [json-schema-to-ts](https://www.npmjs.com/package/json-schema-to-ts).
* If you're not satisfied with the inferred type, you may specify it manually in the first type parameter.
*/
function createRule(rule) {
	return {
		create(context) {
			if (!isPackageJson(context.filename)) return {};
			return rule.create(context);
		},
		meta: {
			...rule.meta,
			docs: {
				...rule.meta.docs,
				url: `https://github.com/JoshuaKGoldberg/eslint-plugin-package-json/blob/HEAD/docs/rules/${rule.name}.md`
			}
		}
	};
}

//#endregion
export { createRule };