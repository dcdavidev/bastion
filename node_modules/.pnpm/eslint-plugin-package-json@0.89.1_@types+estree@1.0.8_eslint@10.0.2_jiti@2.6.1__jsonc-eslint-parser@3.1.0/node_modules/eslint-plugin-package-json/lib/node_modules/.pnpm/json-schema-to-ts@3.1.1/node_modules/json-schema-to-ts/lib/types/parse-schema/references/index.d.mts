import { JSONSchema } from "../../definitions/jsonSchema.mjs";
import { Split } from "../../type-utils/split.mjs";
import { ParseExternalReferenceSchema } from "./external.mjs";
import { ParseInternalReferenceSchema } from "./internal.mjs";
import { ParseSchemaOptions } from "../index.mjs";

//#region node_modules/.pnpm/json-schema-to-ts@3.1.1/node_modules/json-schema-to-ts/lib/types/parse-schema/references/index.d.ts
type ReferencingSchema = JSONSchema & {
  $ref: string;
};
type ParseReferenceSchema<REFERENCING_SCHEMA extends ReferencingSchema, OPTIONS extends ParseSchemaOptions, REFERENCE_ID_AND_PATH extends string[] = Split<REFERENCING_SCHEMA["$ref"], "#">> = REFERENCE_ID_AND_PATH[0] extends "" ? ParseInternalReferenceSchema<REFERENCING_SCHEMA, OPTIONS, REFERENCE_ID_AND_PATH[1]> : ParseExternalReferenceSchema<REFERENCING_SCHEMA, OPTIONS, REFERENCE_ID_AND_PATH[0], REFERENCE_ID_AND_PATH[1]>;
//#endregion
export { ParseReferenceSchema, ReferencingSchema };